{"consumes":["application/json"],"produces":["application/json"],"schemes":["https"],"swagger":"2.0","info":{"description":"HTTP API for transcoding media files into different formats using pluggable\nproviders.\n\nh2:Currently supported providers\n\nb: [Amazon Elastic Transcoder](https://aws.amazon.com/elastictranscoder/)\nb: [Elemental Conductor](https://www.elementaltechnologies.com/products/elemental-conductor)\nb: [Encoding.com](http://api.encoding.com)","title":"video-transcoding-api","license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"},"version":"1.0.0"},"basePath":"/","paths":{"/jobs":{"post":{"summary":"Creates a new transcoding job.","operationId":"newJob","parameters":[{"name":"Payload","in":"body","required":true,"schema":{"type":"object","properties":{"Presets":{"description":"presets to be used. this parameter is exclusive with the list of\nprofiles. One, and only one, of both should be provided.","type":"array","items":{"type":"string"}},"Profiles":{"description":"profiles to be used. This parameter is exclusive with the list of\npresets. One, and only one, of both should be provided.","type":"array","items":{"$ref":"#/definitions/Profile"}},"Provider":{"description":"provider to use in this job","type":"string"},"Source":{"description":"source media for the transcode job.","type":"string"}}}}],"responses":{"200":{"$ref":"#/responses/job"},"400":{"$ref":"#/responses/invalidJob"},"500":{"$ref":"#/responses/genericError"}}}},"/jobs/{JobID}":{"get":{"description":"Finds a trancode job using its ID. It also queries the provider to get the\nstatus of the job.","operationId":"getJob","parameters":[{"type":"string","name":"JobID","in":"path","required":true}],"responses":{"200":{"$ref":"#/responses/jobStatus"},"404":{"$ref":"#/responses/jobNotFound"},"410":{"$ref":"#/responses/jobNotFoundInTheProvider"},"500":{"$ref":"#/responses/genericError"}}}},"/presets":{"get":{"tags":["listPresets"],"summary":"List available presets on the API.","operationId":"presets","responses":{"200":{"$ref":"#/responses/listPresets"},"500":{"$ref":"#/responses/genericError"}}},"post":{"summary":"Creates a new preset in the API.","operationId":"newPreset","parameters":[{"name":"Payload","in":"body","required":true,"schema":{"$ref":"#/definitions/Preset"}}],"responses":{"200":{"$ref":"#/responses/preset"},"400":{"$ref":"#/responses/invalidPreset"},"409":{"$ref":"#/responses/presetAlreadyExists"},"500":{"$ref":"#/responses/genericError"}}}},"/presets/{Name}":{"get":{"summary":"Finds a preset using its name.","operationId":"getPreset","parameters":[{"type":"string","name":"Name","in":"path","required":true}],"responses":{"200":{"$ref":"#/responses/preset"},"404":{"$ref":"#/responses/presetNotFound"},"500":{"$ref":"#/responses/genericError"}}},"delete":{"summary":"Deletes a preset by name.","operationId":"deletePreset","parameters":[{"type":"string","name":"Name","in":"path","required":true}],"responses":{"200":{"$ref":"#/responses/emptyResponse"},"404":{"$ref":"#/responses/presetNotFound"},"500":{"$ref":"#/responses/genericError"}}}}},"definitions":{"Factory":{"description":"Factory is the function responsible for creating the instance of a\nprovider.","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"InvalidConfigError":{"description":"InvalidConfigError is returned if a provider could not be configured properly","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Job":{"description":"Job represents the job that is persisted in the repository of the Transcoding\nAPI.","type":"object","required":["providerName","providerJobId"],"properties":{"jobId":{"description":"id of the job. It's automatically generated by the API when creating\na new Job.","type":"string","uniqueItems":true,"x-go-name":"ID"},"providerJobId":{"description":"id of the job on the provider","type":"string","x-go-name":"ProviderJobID"},"providerName":{"description":"name of the provider","type":"string","x-go-name":"ProviderName"}},"x-go-package":"github.com/nytm/video-transcoding-api/db"},"JobNotFoundError":{"description":"JobNotFoundError is returned if a job with a given id could not be found by the provider","type":"object","properties":{"ID":{"type":"string"}},"x-go-package":"github.com/nytm/video-transcoding-api/provider"},"JobStatus":{"description":"JobStatus is the representation of the status as the provide sees it. The\nprovider is able to add customized information in the ProviderStatus field.","type":"object","properties":{"providerJobId":{"type":"string","x-go-name":"ProviderJobID"},"providerName":{"type":"string","x-go-name":"ProviderName"},"providerStatus":{"type":"object","additionalProperties":{"type":"object"},"x-go-name":"ProviderStatus"},"status":{"type":"string","x-go-name":"Status"},"statusMessage":{"type":"string","x-go-name":"StatusMessage"}},"x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Preset":{"description":"Each preset is just an aggregator of provider presets, where each preset in\nthe API maps to a preset on each provider","type":"object","title":"Preset represents the preset that is persisted in the repository of the\nTranscoding API","required":["name","providerMapping"],"properties":{"name":{"description":"name of the preset","type":"string","uniqueItems":true,"x-go-name":"Name"},"providerMapping":{"description":"mapping of provider name to provider's internal preset id.","type":"object","additionalProperties":{"type":"string"},"x-go-name":"ProviderMapping"}},"x-go-package":"github.com/nytm/video-transcoding-api/db"},"PresetTranscodingProvider":{"description":"PresetTranscodingProvider is a transcoding provider that supports\ntranscoding media using preset names.","type":"object","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Profile":{"type":"object","title":"Profile contains the set of options for transcoding a media.","properties":{"AudioBitRate":{"type":"string"},"AudioChannelsNumber":{"type":"string"},"AudioCodec":{"type":"string"},"AudioSampleRate":{"type":"integer","format":"uint64"},"AudioVolume":{"type":"integer","format":"uint64"},"BitRate":{"type":"string"},"FrameRate":{"type":"string"},"KeepAspectRatio":{"type":"boolean"},"KeyFrame":{"type":"string"},"Output":{"type":"array","items":{"type":"string"}},"Rotate":{"$ref":"#/definitions/Rotation"},"Size":{"$ref":"#/definitions/Size"},"TwoPassEncoding":{"type":"boolean"},"VideoCodec":{"type":"string"}},"x-go-package":"github.com/nytm/video-transcoding-api/provider"},"ProfileTranscodingProvider":{"description":"ProfileTranscodingProvider is a transcsoding provider that suppports\ntranscoding media using provided profiles.","type":"object","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Rotation":{"description":"Rotation presents rotation configuration in the provider. It's composed by\ntwo interval values: the rotation in degrees and whether it has been\ndefined.","type":"object","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Size":{"type":"object","title":"Size represents the size of the media in pixels.","properties":{"":{"type":"integer","format":"uint64","x-go-name":"Height"}},"x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Status":{"title":"Status is the status of a transcoding job.","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"TranscodingProvider":{"description":"It defines a basic API for transcoding a media and query the status of a\nJob. The underlying provider should handle the profileSpec as deisired (it\nmight be a JSON, or an XML, or anything else.","type":"object","title":"TranscodingProvider represents a provider of transcoding.","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"baseResponse":{"type":"object","x-go-package":"github.com/nytm/video-transcoding-api/service"},"emptyResponse":{"description":"emptyResponse represents an empty response returned by the API, it's\ncomposed only by the HTTP status code.","x-go-package":"github.com/nytm/video-transcoding-api/service"},"errorResponse":{"description":"errorReponse represents the basic error returned by the API on operation\nfailures.","type":"object","properties":{"error":{"description":"the error message\n\nin: body","type":"string","x-go-name":"Message"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"invalidJobResponse":{"type":"object","title":"error returned when the given job data is not valid.","properties":{"Error":{"description":"in: body","$ref":"#/definitions/errorResponse"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobNotFoundProviderResponse":{"description":"error returned when the given job id could not be found on the underlying\nprovider.","type":"object","properties":{"Error":{"description":"in: body","$ref":"#/definitions/errorResponse"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobNotFoundResponse":{"type":"object","title":"error returned the given job id could not be found on the API.","properties":{"Error":{"description":"in: body","$ref":"#/definitions/errorResponse"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobResponse":{"description":"JSON-encoded version of the Job, includes only the id of the job, that can\nbe used for querying the current status of the job.","type":"object","properties":{"Payload":{"description":"in: body","$ref":"#/definitions/partialJob"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobStatusResponse":{"description":"JSON-encoded JobStatus, containing status information given by the\nunderlying provider.","type":"object","properties":{"Payload":{"description":"in: body","$ref":"#/definitions/JobStatus"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"partialJob":{"type":"object","properties":{"jobId":{"description":"unique identifier of the job","type":"string","uniqueItems":true,"x-go-name":"JobID"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"}},"responses":{"emptyResponse":{"description":"emptyResponse represents an empty response returned by the API, it's\ncomposed only by the HTTP status code."},"genericError":{"description":"errorReponse represents the basic error returned by the API on operation\nfailures."},"invalidJob":{"description":"error returned when the given job data is not valid.","schema":{"$ref":"#/definitions/errorResponse"}},"invalidPreset":{"description":"error returned when the given preset data is not valid.","schema":{"$ref":"#/definitions/errorResponse"}},"job":{"description":"JSON-encoded version of the Job, includes only the id of the job, that can\nbe used for querying the current status of the job.","schema":{"$ref":"#/definitions/partialJob"}},"jobNotFound":{"description":"error returned the given job id could not be found on the API.","schema":{"$ref":"#/definitions/errorResponse"}},"jobNotFoundInTheProvider":{"description":"error returned when the given job id could not be found on the underlying\nprovider.","schema":{"$ref":"#/definitions/errorResponse"}},"jobStatus":{"description":"JSON-encoded JobStatus, containing status information given by the\nunderlying provider.","schema":{"$ref":"#/definitions/JobStatus"}},"listPresets":{"description":"response for the listPresets operation. It's actually a JSON-encoded object\ninstead of an array, in the format `presetName: presetObject`","schema":{"type":"object","additionalProperties":{"$ref":"#/definitions/Preset"}}},"preset":{"description":"JSON-encoded preset returned on the newPreset and getPreset operations.","schema":{"$ref":"#/definitions/Preset"}},"presetAlreadyExists":{"description":"error returned when trying to create a new preset using a name that is\nalready in-use.","schema":{"$ref":"#/definitions/errorResponse"}},"presetNotFound":{"description":"error returned when the given preset name is not found on the API (either on\ngetPreset or deletePreset operations).","schema":{"$ref":"#/definitions/errorResponse"}}}}