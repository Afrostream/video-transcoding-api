{"consumes":["application/json"],"produces":["application/json"],"schemes":["https"],"swagger":"2.0","info":{"description":"HTTP API for transcoding media files into different formats using pluggable\nproviders.\n\nh2:Currently supported providers\n\nb: [Amazon Elastic Transcoder](https://aws.amazon.com/elastictranscoder/)\nb: [Elemental Conductor](https://www.elementaltechnologies.com/products/elemental-conductor)\nb: [Encoding.com](http://api.encoding.com)","title":"video-transcoding-api","license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"},"version":"1.0.0"},"basePath":"/","paths":{"/jobs":{"post":{"summary":"Creates a new transcoding job.","operationId":"newJob","parameters":[{"description":"source media for the transcode job.","name":"Source","in":"body","required":true,"schema":{"type":"string"}},{"description":"profiles to be used. This parameter is exclusive with the list of\npresets. One, and only one, of both should be provided.","name":"Profiles","in":"body","schema":{"type":"array","items":{"$ref":"#/definitions/Profile"}}},{"description":"presets to be used. this parameter is exclusive with the list of\nprofiles. One, and only one, of both should be provided.","name":"Presets","in":"body","schema":{"type":"array","items":{"type":"string"}}},{"description":"provider to use in this job","name":"Provider","in":"body","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/responses/job"},"400":{"$ref":"#/responses/invalidJob"},"500":{"$ref":"#/responses/genericError"}}}},"/jobs/{jobId}":{"get":{"description":"Finds a trancode job using its ID. It also queries the provider to get the\nstatus of the job.","operationId":"getJob","responses":{"200":{"$ref":"#/responses/jobStatus"},"404":{"$ref":"#/responses/jobNotFound"},"410":{"$ref":"#/responses/jobNotFoundInTheProvider"},"500":{"$ref":"#/responses/genericError"}}}},"/presets":{"get":{"tags":["listPresets"],"summary":"List available presets on the API.","operationId":"presets","responses":{"200":{"$ref":"#/responses/listPresets"},"500":{"$ref":"#/responses/genericError"}}},"post":{"summary":"Creates a new preset in the API.","operationId":"newPreset","parameters":[{"x-go-name":"ProviderMapping","description":"the mapping of the provider name to the id of the preset in the\nprovider.","name":"providerMapping","in":"body","required":true,"schema":{"type":"object","additionalProperties":{"type":"string"}}},{"x-go-name":"Name","description":"name of the preset.","name":"name","in":"body","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/responses/preset"},"400":{"$ref":"#/responses/invalidPreset"},"409":{"$ref":"#/responses/presetAlreadyExists"},"500":{"$ref":"#/responses/genericError"}}}},"/presets/{name}":{"get":{"summary":"Finds a preset using its name.","operationId":"getPreset","responses":{"200":{"$ref":"#/responses/preset"},"404":{"$ref":"#/responses/presetNotFound"},"500":{"$ref":"#/responses/genericError"}}},"delete":{"summary":"Deletes a preset by name.","operationId":"deletePreset","responses":{"200":{"schema":{"$ref":"#/definitions/emptyResponse"}},"404":{"$ref":"#/responses/presetNotFound"},"500":{"$ref":"#/responses/genericError"}}}}},"definitions":{"Job":{"description":"Job represents the job that is persisted in the repository of the Transcoding\nAPI.","type":"object","required":["providerName","providerJobId"],"properties":{"jobId":{"description":"id of the job. It's automatically generated by the API when creating\na new Job.","type":"string","uniqueItems":true,"x-go-name":"ID"},"providerJobId":{"description":"id of the job on the provider","type":"string","x-go-name":"ProviderJobID"},"providerName":{"description":"name of the provider","type":"string","x-go-name":"ProviderName"}},"x-go-package":"github.com/nytm/video-transcoding-api/db"},"JobStatus":{"description":"JobStatus is the representation of the status as the provide sees it. The\nprovider is able to add customized information in the ProviderStatus field.","type":"object","properties":{"providerJobId":{"type":"string","x-go-name":"ProviderJobID"},"providerName":{"type":"string","x-go-name":"ProviderName"},"providerStatus":{"type":"object","additionalProperties":{"type":"object"},"x-go-name":"ProviderStatus"},"status":{"type":"string","x-go-name":"Status"},"statusMessage":{"type":"string","x-go-name":"StatusMessage"}},"x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Preset":{"description":"Each preset is just an aggregator of provider presets, where each preset in\nthe API maps to a preset on each provider","type":"object","title":"Preset represents the preset that is persisted in the repository of the\nTranscoding API","required":["name","providerMapping"],"properties":{"name":{"description":"name of the preset","type":"string","uniqueItems":true,"x-go-name":"Name"},"providerMapping":{"description":"mapping of provider name to provider's internal preset id.","type":"object","additionalProperties":{"type":"string"},"x-go-name":"ProviderMapping"}},"x-go-package":"github.com/nytm/video-transcoding-api/db"},"Profile":{"type":"object","title":"Profile contains the set of options for transcoding a media.","properties":{"AudioBitRate":{"type":"string"},"AudioChannelsNumber":{"type":"string"},"AudioCodec":{"type":"string"},"AudioSampleRate":{"type":"integer","format":"uint64"},"AudioVolume":{"type":"integer","format":"uint64"},"BitRate":{"type":"string"},"FrameRate":{"type":"string"},"KeepAspectRatio":{"type":"boolean"},"KeyFrame":{"type":"string"},"Output":{"type":"array","items":{"type":"string"}},"Rotate":{"$ref":"#/definitions/Rotation"},"Size":{"$ref":"#/definitions/Size"},"TwoPassEncoding":{"type":"boolean"},"VideoCodec":{"type":"string"}},"x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Rotation":{"description":"Rotation presents rotation configuration in the provider. It's composed by\ntwo interval values: the rotation in degrees and whether it has been\ndefined.","type":"object","x-go-package":"github.com/nytm/video-transcoding-api/provider"},"Size":{"type":"object","title":"Size represents the size of the media in pixels.","properties":{"":{"type":"integer","format":"uint64","x-go-name":"Height"}},"x-go-package":"github.com/nytm/video-transcoding-api/provider"},"baseResponse":{"type":"object","x-go-package":"github.com/nytm/video-transcoding-api/service"},"emptyResponse":{"description":"emptyResponse represents an empty response returned by the API, it's\ncomposed only by the HTTP status code.","x-go-package":"github.com/nytm/video-transcoding-api/service"},"errorResponse":{"description":"errorReponse represents the basic error returned by the API on operation\nfailures.","type":"object","required":["error"],"properties":{"error":{"description":"the error message","type":"string","x-go-name":"Message"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"invalidJobResponse":{"type":"object","properties":{"Error":{"description":"in: body","$ref":"#/definitions/errorResponse"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobNotFoundProviderResponse":{"type":"object","properties":{"Error":{"description":"in: body","$ref":"#/definitions/errorResponse"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobNotFoundResponse":{"type":"object","properties":{"Error":{"description":"in: body","$ref":"#/definitions/errorResponse"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobResponse":{"description":"represents the job after creation, includes the id of the job only, that can\nbe used for querying the current status of the job.","type":"object","properties":{"Payload":{"description":"in: body","$ref":"#/definitions/partialJob"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"jobStatusResponse":{"type":"object","properties":{"Payload":{"description":"in: body","$ref":"#/definitions/JobStatus"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"},"partialJob":{"type":"object","properties":{"jobId":{"description":"unique identifier of the job","type":"string","uniqueItems":true,"x-go-name":"JobID"}},"x-go-package":"github.com/nytm/video-transcoding-api/service"}},"responses":{"invalidJob":{"schema":{"$ref":"#/definitions/errorResponse"}},"invalidPreset":{"schema":{"$ref":"#/definitions/errorResponse"}},"job":{"description":"represents the job after creation, includes the id of the job only, that can\nbe used for querying the current status of the job.","schema":{"$ref":"#/definitions/partialJob"}},"jobNotFound":{"schema":{"$ref":"#/definitions/errorResponse"}},"jobNotFoundInTheProvider":{"schema":{"$ref":"#/definitions/errorResponse"}},"jobStatus":{"schema":{"$ref":"#/definitions/JobStatus"}},"listPresets":{"schema":{"type":"object","additionalProperties":{"$ref":"#/definitions/Preset"}}},"preset":{"schema":{"$ref":"#/definitions/Preset"}},"presetAlreadyExists":{"schema":{"$ref":"#/definitions/errorResponse"}},"presetNotFound":{"schema":{"$ref":"#/definitions/errorResponse"}}}}